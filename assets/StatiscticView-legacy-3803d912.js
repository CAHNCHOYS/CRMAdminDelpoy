System.register(["./index-legacy-ea2b4db0.js","./index-legacy-ed1cd793.js"],(function(t,e){"use strict";var a,s,o,l,d,n,r,i,c,u,p,m,g,h,f,b,x,y,v,_,w,A,k,D,C,B,F,j,P,I,O,E,R,z,S=document.createElement("style");return S.textContent="canvas[data-v-9551457b]{width:100%!important;min-height:200px!important;max-height:400px}@media (max-width: 479.98px){canvas[data-v-9551457b]{max-height:250px}}canvas[data-v-04e52979]{width:100%!important;min-height:200px!important;max-height:400px!important}@media (max-width: 479.98px){canvas[data-v-04e52979]{max-height:250px!important}}canvas[data-v-377b486c]{width:100%!important;min-height:250px!important}canvas[data-v-07495283]{width:100%!important;min-height:250px!important}canvas[data-v-e2cbfbac]{width:100%!important;min-height:250px!important;max-height:350px!important}canvas[data-v-bd750fb1]{width:100%!important;min-height:200px!important;max-height:350px!important}\n",document.head.appendChild(S),{setters:[t=>{a=t.d,s=t.r,o=t.a8,l=t.T,d=t.a9,n=t.X,r=t.aa,i=t.ab,c=t.ac,u=t.ad,p=t.ae,m=t.af,g=t.ag,h=t.ah,f=t.ai,b=t.o,x=t.P,y=t.f,v=t.j,_=t.c,w=t.g,A=t._,k=t.aj,D=t.Z,C=t.ak,B=t.al,F=t.U,j=t.e,P=t.B,I=t.s,O=t.C,E=t.a3,R=t.G,z=t.t},null],execute:function(){const e={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},S={type:{type:String,required:!0},...e},M="2"===h[0]?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function W(t){return c(t)?r(t):t}function Z(t,e){t.labels=e}function K(t,e,a){const s=[];t.datasets=e.map((e=>{const o=t.datasets.find((t=>t[a]===e[a]));return o&&e.data&&!s.includes(o)?(s.push(o),Object.assign(o,e),o):{...e}}))}const q=a({props:S,setup(t,e){let{expose:a}=e;const p=s(null),m=o(null);return a({chart:m}),l((()=>{if(!p.value)return;const{type:e,data:a,options:s,plugins:o,datasetIdKey:l}=t,d=function(t,e){const a={labels:[],datasets:[]};return Z(a,t.labels),K(a,t.datasets,e),a}(a,l),n=function(t){return c(arguments.length>1&&void 0!==arguments[1]?arguments[1]:t)?new Proxy(t,{}):t}(d,a);m.value=new u(p.value,{type:e,data:n,options:{...s},plugins:o})})),d((()=>{const t=r(m.value);t&&(t.destroy(),m.value=null)})),n([()=>t.options,()=>t.data],((e,a)=>{let[s,o]=e,[l,d]=a;const n=r(m.value);if(!n)return;let i=!1;if(s){const t=W(s),e=W(l);t&&t!==e&&(function(t,e){const a=t.options;a&&e&&Object.assign(a,e)}(n,t),i=!0)}if(o){const e=W(o.labels),a=W(d.labels),s=W(o.datasets),l=W(d.datasets);e!==a&&(Z(n.config.data,e),i=!0),s&&s!==l&&(K(n.config.data,s,t.datasetIdKey),i=!0)}i&&(e=>{e.update(t.updateMode)})(n)}),{deep:!0}),()=>i("canvas",{ref:p})}});function T(t,s){return u.register(s),a({props:e,setup(e,a){let{expose:s}=a;const l=o(null),d=t=>{l.value=t?.chart};return s({chart:l}),()=>i(q,M({ref:d},{type:t,...e}))}})}const G=T("bar",p),U=T("doughnut",m),V=T("line",g),X={key:1,class:"text-h6"},H=A(a({__name:"ProductsCount",props:{products:null},setup(t){const e=t,a=f((()=>({labels:e.products.map((t=>t.name)),datasets:[{label:"Кол-во: ",backgroundColor:["#512DA8","#283593","#0277BD","#558B2F","#78909C","#BDBDBD","#FF9800","#FBC02D","#42A5F5","#8BC34A","#5D4037","#64FFDA","#EC407A","#004D40","#AFB42B","#AD1457","#9E9E9E"],data:e.products.map((t=>t.count)),hoverOffset:4}]}))),s={responsive:!0,maintainAspectRatio:!1,layout:{padding:0},plugins:{legend:{display:!1},title:{display:!0,color:"black",text:"Количество каждого товара",padding:{bottom:20},font:{size:26,weight:"normal"}}}};return(t,o)=>(b(),x(w,{"max-width":"100%",elevation:"5",class:"pa-5"},{default:y((()=>[e.products.length?(b(),x(v(U),{key:0,data:v(a),options:s},null,8,["data"])):(b(),_("p",X,"Недостаточно данных для построения графика"))])),_:1}))}}),[["__scopeId","data-v-9551457b"]]),J={key:1,class:"text-h6"},L=A(a({__name:"ProductsPrices",props:{products:null},setup(t){const e=t,a=f((()=>({labels:e.products.map((t=>t.name)),datasets:[{label:"Цена(руб): ",backgroundColor:["#512DA8","#283593","#0277BD","#558B2F","#78909C","#BDBDBD","#FF9800","#FBC02D","#42A5F5","#8BC34A","#5D4037","#64FFDA","#EC407A","#004D40","#AFB42B","#AD1457","#9E9E9E"],data:e.products.map((t=>t.price)),hoverOffset:4}]}))),s={responsive:!0,maintainAspectRatio:!1,layout:{padding:0},plugins:{legend:{display:!1},title:{display:!0,color:"black",text:"Цены товаров",padding:{bottom:20},font:{size:26,weight:"normal"}},tooltip:{}}};return(t,o)=>(b(),x(w,{"max-width":"100%",elevation:"5",class:"pa-5"},{default:y((()=>[e.products.length?(b(),x(v(U),{key:0,data:v(a),options:s},null,8,["data"])):(b(),_("p",J,"Недостаточно данных для построения графика"))])),_:1}))}}),[["__scopeId","data-v-04e52979"]]),N={key:1,class:"text-h6"},Q=A(a({__name:"CustomersPremium",props:{customers:null},setup(t){const e=t,a=f((()=>({labels:["Наличие премиума"],datasets:[{label:"Есть премиум",data:[e.customers.filter((t=>"Да"===t.premium)).length]},{label:"Нету премиума",data:[e.customers.filter((t=>"Нет"===t.premium)).length]}]}))),s={responsive:!0,maintainAspectRatio:!1,layout:{padding:0},elements:{bar:{borderRadius:0,borderWidth:4}},scales:{y:{beginAtZero:!0,suggestedMin:0}},plugins:{legend:{display:!0,position:"bottom",title:{}},title:{display:!0,color:"black",text:"Премиум у клиентов",padding:{bottom:20},font:{size:26,weight:"normal"}}}};return(t,o)=>(b(),x(w,{"max-width":"100%",class:"pa-5",elevation:"5"},{default:y((()=>[e.customers.length?(b(),x(v(G),{key:0,data:v(a),options:s},null,8,["data"])):(b(),_("p",N,"Недостаточно данных для построения графика"))])),_:1}))}}),[["__scopeId","data-v-377b486c"]]),Y={key:1,class:"text-h6"},$=A(a({__name:"CategoryProductsCount",props:{categories:null,products:null},setup(t){const e=t,a=f((()=>({labels:["Количество товара по категориям"],datasets:e.categories.map((t=>({label:t.name,data:[e.products.filter((e=>e.category===t.name)).length]})))}))),s={responsive:!0,maintainAspectRatio:!1,layout:{padding:0},elements:{bar:{borderRadius:0,borderWidth:4}},scales:{x:{grid:{display:!1}},y:{grid:{display:!1}}},plugins:{legend:{display:!0,position:"bottom"},title:{display:!0,color:"black",text:"Количество товаров по категориям",padding:{bottom:20},font:{size:26,weight:"normal"}}}};return(t,o)=>(b(),x(w,{"max-width":"100%",class:"pa-5",elevation:"5"},{default:y((()=>[e.products.length?(b(),x(v(G),{key:0,data:v(a),options:s},null,8,["data"])):(b(),_("p",Y,"Недостаточно данных для построения графика"))])),_:1}))}}),[["__scopeId","data-v-07495283"]]),tt={key:1,class:"text-h6"},et=A(a({__name:"OrdersByDate",props:{orders:null},setup(t){const e=t;function a(t){return t.split("-").reverse().join("-")}const s=f((()=>{const t=[],a=[];for(const s of e.orders)if(!t.includes(s.date)){const o=e.orders.filter((t=>t.date===s.date));t.push(s.date),a.push(o.reduce(((t,e)=>t+e.productCount),0))}return a})),o=f((()=>({labels:[...new Set(e.orders.sort(((t,e)=>Date.parse(a(t.date))-Date.parse(a(e.date)))).map((t=>t.date)))],datasets:[{label:"Кол-во товаров",data:s.value,borderColor:"#3F51B5",fill:!1,borderWidth:4}]}))),l={responsive:!0,maintainAspectRatio:!1,layout:{padding:0},scales:{y:{beginAtZero:!1,suggestedMin:0,grid:{display:!1}},x:{grid:{display:!1}}},plugins:{legend:{display:!1},title:{display:!0,color:"black",text:"Кол-во товаров в заказах",padding:{bottom:20},font:{size:26,weight:"normal"}}}};return(t,a)=>(b(),x(w,{width:"100%",color:"white",class:"pa-5",elevation:"5"},{default:y((()=>[e.orders.length?(b(),x(v(V),{key:0,data:v(o),options:l},null,8,["data"])):(b(),_("p",tt,"Недостаточно данных для построения графика"))])),_:1}))}}),[["__scopeId","data-v-e2cbfbac"]]),at={key:1,class:"text-h6"},st=A(a({__name:"ProductsInOrders",props:{products:null,orders:null},setup(t){const e=t,a=f((()=>({labels:["Товары"],datasets:e.products.map((t=>({label:t.name,data:[e.orders.filter((e=>e.productId===t.id)).length]})))}))),s={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,grid:{display:!1}},x:{grid:{display:!1}}},layout:{padding:0},elements:{bar:{borderWidth:4,borderRadius:0}},plugins:{title:{display:!0,text:"Сколько раз был заказан какой товар",padding:{bottom:20},font:{size:20,weight:"bold"}},legend:{display:!1}}};return(t,o)=>(b(),x(w,{color:"white",class:"pa-5",elevation:"5"},{default:y((()=>[e.orders.length?(b(),x(v(G),{key:0,data:v(a),options:s},null,8,["data"])):(b(),_("p",at,"Недостаточно данных для построения графика"))])),_:1}))}}),[["__scopeId","data-v-bd750fb1"]]),ot=I("h2",{class:"title text-sm-h2 text-h3 mb-6"},"Статистика",-1),lt=I("p",{class:"text-sm-h5 text-h6"},"Всего товаров",-1),dt={class:"text-h2"},nt=I("p",{class:"text-sm-h5 text-h6"},"Всего Клиентов",-1),rt={class:"text-h2"},it=I("p",{class:"text-sm-h5 text-h6"},"Всего Заказов",-1),ct={class:"text-h2"};t("default",a({__name:"StatiscticView",setup(t){const{smAndDown:e}=k(),a=D(),o=C(),d=B(),n=s({count:0}),r=s({count:0}),i=s({count:0});return l((async()=>{a.productsCategories.length||await a.getAllProductsCategories(),F.from(".title",{x:"-300",opacity:0,ease:"linear",duration:.5}),F.from(".stats-header > *",{x:"-100%",stagger:.25,duration:.25,opacity:0,ease:"power2.out"}),F.from(".charts-row > *",{scale:0,stagger:.35,duration:.35,opacity:0,ease:"power3.out",delay:.85,scrollTrigger:{trigger:".charts-row",start:"top 80%",end:"+=1000"}}),F.to(n.value,{count:a.userProducts.length,duration:2.5,delay:.25}),F.to(r.value,{count:o.customers.length,duration:2.5,delay:.5}),F.to(i.value,{count:d.orders.length,duration:2.5,delay:.75})})),(t,s)=>(b(),_("div",null,[ot,j(P,{class:"stats-header"},{default:y((()=>[j(O,{sm:"4",cols:"12",class:"left-header-col"},{default:y((()=>[j(w,{color:"green",height:"100%",elevation:"0"},{default:y((()=>[j(E,null,{default:y((()=>[j(P,{align:"center","no-gutters":v(e)},{default:y((()=>[j(O,{md:"auto",cols:"12",class:"d-md-block d-flex justify-center mb-md-0 mb-1"},{default:y((()=>[j(R,{icon:"mdi-laptop",color:"blue-grey",class:"text-white"})])),_:1}),j(O,{cols:"auto",class:"flex-grow-1 text-md-left text-center"},{default:y((()=>[lt,I("p",dt,z(n.value.count.toFixed(0)),1)])),_:1})])),_:1},8,["no-gutters"])])),_:1})])),_:1})])),_:1}),j(O,{sm:"4",cols:"6",class:"right-header-col"},{default:y((()=>[j(w,{color:"deep-orange-lighten-2",height:"100%",elevation:"0"},{default:y((()=>[j(E,null,{default:y((()=>[j(P,{align:"center","no-gutters":v(e)},{default:y((()=>[j(O,{md:"auto",cols:"12",class:"d-md-block d-flex justify-center mb-md-0 mb-1"},{default:y((()=>[j(R,{icon:"mdi-account",color:"cyan",class:"text-white"})])),_:1}),j(O,{cols:"auto",class:"flex-grow-1 text-white text-md-left text-center"},{default:y((()=>[nt,I("p",rt,z(r.value.count.toFixed(0)),1)])),_:1})])),_:1},8,["no-gutters"])])),_:1})])),_:1})])),_:1}),j(O,{sm:"4",cols:"6",class:"right-header-col"},{default:y((()=>[j(w,{color:"light-blue",height:"100%",elevation:"0"},{default:y((()=>[j(E,null,{default:y((()=>[j(P,{align:"center","no-gutters":v(e)},{default:y((()=>[j(O,{md:"auto",cols:"12",class:"d-md-block d-flex justify-center mb-md-0 mb-1"},{default:y((()=>[j(R,{icon:"mdi-wallet",color:"pink",class:"text-white"})])),_:1}),j(O,{cols:"auto",class:"flex-grow-1 text-white text-md-left text-center"},{default:y((()=>[it,I("p",ct,z(i.value.count.toFixed(0)),1)])),_:1})])),_:1},8,["no-gutters"])])),_:1})])),_:1})])),_:1})])),_:1}),j(P,{align:"stretch",class:"charts-row"},{default:y((()=>[j(O,{md:"4",sm:"6",cols:"12"},{default:y((()=>[j(H,{products:v(a).userProducts},null,8,["products"])])),_:1}),j(O,{md:"4",sm:"6",cols:"12"},{default:y((()=>[j(L,{products:v(a).userProducts},null,8,["products"])])),_:1}),j(O,{md:"4",sm:"6",cols:"12"},{default:y((()=>[j(Q,{customers:v(o).customers},null,8,["customers"])])),_:1}),j(O,{md:"4",sm:"6",cols:"12"},{default:y((()=>[j($,{products:v(a).userProducts,categories:v(a).productsCategories},null,8,["products","categories"])])),_:1}),j(O,{md:"8",cols:"12"},{default:y((()=>[j(et,{orders:v(d).orders},null,8,["orders"])])),_:1}),j(O,{cols:"12"},{default:y((()=>[j(st,{products:v(a).userProducts,orders:v(d).orders},null,8,["products","orders"])])),_:1})])),_:1})]))}}))}}}));
