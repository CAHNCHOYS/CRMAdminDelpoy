import{d as y,r as F,F as z,B as L,G as T,D as G,H as R,I as M,J as U,K as W,L as H,M as J,N as Q,O as X,Q as D,o as i,y as m,e as a,f as u,c as w,k as g,_ as A,E as Y,R as tt,S as et,C as B,b as o,m as C,t as $}from"./index-6bc77bae.js";import"./index-6541271b.js";const V={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},st={type:{type:String,required:!0},...V},ot=X[0]==="2"?(e,t)=>Object.assign(e,{attrs:t}):(e,t)=>Object.assign(e,t);function k(e){return U(e)?R(e):e}function at(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return U(t)?new Proxy(e,{}):e}function rt(e,t){const r=e.options;r&&t&&Object.assign(r,t)}function K(e,t){e.labels=t}function N(e,t,r){const c=[];e.datasets=t.map(s=>{const l=e.datasets.find(n=>n[r]===s[r]);return!l||!s.data||c.includes(l)?{...s}:(c.push(l),Object.assign(l,s),l)})}function nt(e,t){const r={labels:[],datasets:[]};return K(r,e.labels),N(r,e.datasets,t),r}const ct=y({props:st,setup(e,t){let{expose:r}=t;const c=F(null),s=z(null);r({chart:s});const l=()=>{if(!c.value)return;const{type:p,data:h,options:d,plugins:_,datasetIdKey:x}=e,v=nt(h,x),b=at(v,h);s.value=new W(c.value,{type:p,data:b,options:{...d},plugins:_})},n=()=>{const p=R(s.value);p&&(p.destroy(),s.value=null)},f=p=>{p.update(e.updateMode)};return L(l),T(n),G([()=>e.options,()=>e.data],(p,h)=>{let[d,_]=p,[x,v]=h;const b=R(s.value);if(!b)return;let O=!1;if(d){const P=k(d),S=k(x);P&&P!==S&&(rt(b,P),O=!0)}if(_){const P=k(_.labels),S=k(v.labels),I=k(_.datasets),q=k(v.datasets);P!==S&&(K(b.config.data,P),O=!0),I&&I!==q&&(N(b.config.data,I,e.datasetIdKey),O=!0)}O&&f(b)},{deep:!0}),()=>M("canvas",{ref:c})}});function E(e,t){return W.register(t),y({props:V,setup(r,c){let{expose:s}=c;const l=z(null),n=f=>{l.value=f==null?void 0:f.chart};return s({chart:l}),()=>M(ct,ot({ref:n},{type:e,...r}))}})}const j=E("bar",H),Z=E("doughnut",J),lt=E("line",Q),dt={key:1,class:"text-h6"},ut=y({__name:"ProductsCount",props:{products:null},setup(e){const t=e,r=D(()=>({labels:t.products.map(s=>s.name),datasets:[{label:"Кол-во: ",backgroundColor:["#512DA8","#283593","#0277BD","#558B2F","#78909C","#BDBDBD","#FF9800","#FBC02D","#42A5F5","#8BC34A","#5D4037","#64FFDA","#EC407A","#004D40","#AFB42B","#AD1457","#9E9E9E"],data:t.products.map(s=>s.count),hoverOffset:4}]})),c={responsive:!0,maintainAspectRatio:!1,layout:{padding:0},plugins:{legend:{display:!1},title:{display:!0,color:"black",text:"Количество каждого товара",padding:{bottom:20},font:{size:26,weight:"normal"}}}};return(s,l)=>{const n=g("v-card");return i(),m(n,{"max-width":"100%",elevation:"5",class:"pa-5"},{default:a(()=>[t.products.length?(i(),m(u(Z),{key:0,data:u(r),options:c},null,8,["data"])):(i(),w("p",dt,"Недостаточно данных для построения графика"))]),_:1})}}});const it=A(ut,[["__scopeId","data-v-9551457b"]]),pt={key:1,class:"text-h6"},_t=y({__name:"ProductsPrices",props:{products:null},setup(e){const t=e,r=D(()=>({labels:t.products.map(s=>s.name),datasets:[{label:"Цена(руб): ",backgroundColor:["#512DA8","#283593","#0277BD","#558B2F","#78909C","#BDBDBD","#FF9800","#FBC02D","#42A5F5","#8BC34A","#5D4037","#64FFDA","#EC407A","#004D40","#AFB42B","#AD1457","#9E9E9E"],data:t.products.map(s=>s.price),hoverOffset:4}]})),c={responsive:!0,maintainAspectRatio:!1,layout:{padding:0},plugins:{legend:{display:!1},title:{display:!0,color:"black",text:"Цены товаров",padding:{bottom:20},font:{size:26,weight:"normal"}},tooltip:{}}};return(s,l)=>{const n=g("v-card");return i(),m(n,{"max-width":"100%",elevation:"5",class:"pa-5"},{default:a(()=>[t.products.length?(i(),m(u(Z),{key:0,data:u(r),options:c},null,8,["data"])):(i(),w("p",pt,"Недостаточно данных для построения графика"))]),_:1})}}});const ft=A(_t,[["__scopeId","data-v-04e52979"]]),mt={key:1,class:"text-h6"},gt=y({__name:"CustomersPremium",props:{customers:null},setup(e){const t=e,r=D(()=>({labels:["Наличие премиума"],datasets:[{label:"Есть премиум",data:[t.customers.filter(s=>s.premium==="Да").length]},{label:"Нету премиума",data:[t.customers.filter(s=>s.premium==="Нет").length]}]})),c={responsive:!0,maintainAspectRatio:!1,layout:{padding:0},elements:{bar:{borderRadius:0,borderWidth:4}},scales:{y:{beginAtZero:!0,suggestedMin:0}},plugins:{legend:{display:!0,position:"bottom",title:{}},title:{display:!0,color:"black",text:"Премиум у клиентов",padding:{bottom:20},font:{size:26,weight:"normal"}}}};return(s,l)=>{const n=g("v-card");return i(),m(n,{"max-width":"100%",class:"pa-5",elevation:"5"},{default:a(()=>[t.customers.length?(i(),m(u(j),{key:0,data:u(r),options:c},null,8,["data"])):(i(),w("p",mt,"Недостаточно данных для построения графика"))]),_:1})}}});const ht=A(gt,[["__scopeId","data-v-377b486c"]]),yt={key:1,class:"text-h6"},vt=y({__name:"CategoryProductsCount",props:{categories:null,products:null},setup(e){const t=e,r=D(()=>({labels:["Количество товара по категориям"],datasets:t.categories.map(s=>({label:s.name,data:[t.products.filter(l=>l.category===s.name).length]}))})),c={responsive:!0,maintainAspectRatio:!1,layout:{padding:0},elements:{bar:{borderRadius:0,borderWidth:4}},scales:{x:{grid:{display:!1}},y:{grid:{display:!1}}},plugins:{legend:{display:!0,position:"bottom"},title:{display:!0,color:"black",text:"Количество товаров по категориям",padding:{bottom:20},font:{size:26,weight:"normal"}}}};return(s,l)=>{const n=g("v-card");return i(),m(n,{"max-width":"100%",class:"pa-5",elevation:"5"},{default:a(()=>[t.products.length?(i(),m(u(j),{key:0,data:u(r),options:c},null,8,["data"])):(i(),w("p",yt,"Недостаточно данных для построения графика"))]),_:1})}}});const xt=A(vt,[["__scopeId","data-v-07495283"]]),bt={key:1,class:"text-h6"},Ct=y({__name:"OrdersByDate",props:{orders:null},setup(e){const t=e;function r(n){return n.split("-").reverse().join("-")}const c=D(()=>{const n=[],f=[];for(const p of t.orders)if(!n.includes(p.date)){const h=t.orders.filter(d=>d.date===p.date);n.push(p.date),f.push(h.reduce((d,_)=>d+_.productCount,0))}return f}),s=D(()=>({labels:[...new Set(t.orders.sort((n,f)=>Date.parse(r(n.date))-Date.parse(r(f.date))).map(n=>n.date))],datasets:[{label:"Кол-во товаров",data:c.value,borderColor:"#3F51B5",fill:!1,borderWidth:4}]})),l={responsive:!0,maintainAspectRatio:!1,layout:{padding:0},scales:{y:{beginAtZero:!1,suggestedMin:0,grid:{display:!1}},x:{grid:{display:!1}}},plugins:{legend:{display:!1},title:{display:!0,color:"black",text:"Кол-во товаров в заказах",padding:{bottom:20},font:{size:26,weight:"normal"}}}};return(n,f)=>{const p=g("v-card");return i(),m(p,{width:"100%",color:"white",class:"pa-5",elevation:"5"},{default:a(()=>[t.orders.length?(i(),m(u(lt),{key:0,data:u(s),options:l},null,8,["data"])):(i(),w("p",bt,"Недостаточно данных для построения графика"))]),_:1})}}});const Dt=A(Ct,[["__scopeId","data-v-e2cbfbac"]]),wt={key:1,class:"text-h6"},Pt=y({__name:"ProductsInOrders",props:{products:null,orders:null},setup(e){const t=e,r=D(()=>({labels:["Товары"],datasets:t.products.map(s=>({label:s.name,data:[t.orders.filter(l=>l.productId===s.id).length]}))})),c={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,grid:{display:!1}},x:{grid:{display:!1}}},layout:{padding:0},elements:{bar:{borderWidth:4,borderRadius:0}},plugins:{title:{display:!0,text:"Сколько раз был заказан какой товар",padding:{bottom:20},font:{size:20,weight:"bold"}},legend:{display:!1}}};return(s,l)=>{const n=g("v-card");return i(),m(n,{color:"white",class:"pa-5",elevation:"5"},{default:a(()=>[t.orders.length?(i(),m(u(j),{key:0,data:u(r),options:c},null,8,["data"])):(i(),w("p",wt,"Недостаточно данных для построения графика"))]),_:1})}}});const Bt=A(Pt,[["__scopeId","data-v-bd750fb1"]]),kt=C("h2",{class:"text-sm-h2 text-h3 mb-6"},"Статистика",-1),At=C("p",{class:"text-sm-h5 text-h6"},"Всего товаров",-1),Ot={class:"text-h2"},Ft=C("p",{class:"text-sm-h5 text-h6"},"Всего Клиентов",-1),St={class:"text-h2"},It=C("p",{class:"text-sm-h5 text-h6"},"Всего Заказов",-1),$t={class:"text-h2"},jt=y({__name:"StatiscticView",setup(e){const t=Y(),r=tt(),c=et(),s=F({count:0}),l=F({count:0}),n=F({count:0});return L(async()=>{t.productsCategories.length||await t.getAllProductsCategories(),B.from(".title",{x:"-300",opacity:0,ease:"linear",duration:.5}),B.from(".stats-header > *",{x:"-100%",stagger:.25,duration:.35,opacity:0,ease:"power2.out"}),B.from(".charts-row > *",{scale:0,stagger:.25,duration:.5,opacity:0,ease:"power3.out",delay:.85,scrollTrigger:{trigger:".charts-row",start:"top 50%",end:"+=1000"}}),B.to(s.value,{count:t.userProducts.length,duration:2,delay:.3}),B.to(l.value,{count:r.customers.length,duration:2,delay:.3}),B.to(n.value,{count:c.orders.length,duration:2,delay:.3})}),(f,p)=>{const h=g("v-btn"),d=g("v-col"),_=g("v-row"),x=g("v-card-text"),v=g("v-card");return i(),w("div",null,[kt,o(_,{class:"stats-header"},{default:a(()=>[o(d,{sm:"4",cols:"12",class:"left-header-col"},{default:a(()=>[o(v,{color:"green",height:"100%",elevation:"0"},{default:a(()=>[o(x,null,{default:a(()=>[o(_,{align:"center"},{default:a(()=>[o(d,{md:"auto",cols:"12",class:"d-md-block d-flex justify-center"},{default:a(()=>[o(h,{icon:"mdi-laptop",color:"blue-grey",class:"text-white"})]),_:1}),o(d,{cols:"auto",class:"flex-grow-1 text-md-left text-center"},{default:a(()=>[At,C("p",Ot,$(s.value.count.toFixed(0)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(d,{sm:"4",cols:"6",class:"right-header-col"},{default:a(()=>[o(v,{color:"deep-orange-lighten-2",height:"100%",elevation:"0"},{default:a(()=>[o(x,null,{default:a(()=>[o(_,{align:"center"},{default:a(()=>[o(d,{md:"auto",cols:"12",class:"d-md-block d-flex justify-center"},{default:a(()=>[o(h,{icon:"mdi-account",color:"cyan",class:"text-white"})]),_:1}),o(d,{cols:"auto",class:"flex-grow-1 text-white text-md-left text-center"},{default:a(()=>[Ft,C("p",St,$(l.value.count.toFixed(0)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(d,{sm:"4",cols:"6",class:"right-header-col"},{default:a(()=>[o(v,{color:"light-blue",height:"100%",elevation:"0"},{default:a(()=>[o(x,null,{default:a(()=>[o(_,{align:"center"},{default:a(()=>[o(d,{md:"auto",cols:"12",class:"d-md-block d-flex justify-center"},{default:a(()=>[o(h,{icon:"mdi-wallet",color:"pink",class:"text-white"})]),_:1}),o(d,{cols:"auto",class:"flex-grow-1 text-white text-md-left text-center"},{default:a(()=>[It,C("p",$t,$(n.value.count.toFixed(0)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(_,{align:"stretch",class:"charts-row"},{default:a(()=>[o(d,{md:"4",sm:"6",cols:"12"},{default:a(()=>[o(it,{products:u(t).userProducts},null,8,["products"])]),_:1}),o(d,{md:"4",sm:"6",cols:"12"},{default:a(()=>[o(ft,{products:u(t).userProducts},null,8,["products"])]),_:1}),o(d,{md:"4",sm:"6",cols:"12"},{default:a(()=>[o(ht,{customers:u(r).customers},null,8,["customers"])]),_:1}),o(d,{md:"4",sm:"6",cols:"12"},{default:a(()=>[o(xt,{products:u(t).userProducts,categories:u(t).productsCategories},null,8,["products","categories"])]),_:1}),o(d,{md:"8",cols:"12"},{default:a(()=>[o(Dt,{orders:u(c).orders},null,8,["orders"])]),_:1}),o(d,{cols:"12"},{default:a(()=>[o(Bt,{products:u(t).userProducts,orders:u(c).orders},null,8,["products","orders"])]),_:1})]),_:1})])}}});export{jt as default};
