import{r as v,P as D,W as E,d as F,ai as $,o as c,O as q,e as p,q as n,c as m,aq as y,b as u,an as k,p as A,t as g,al as _,am as I,E as M,av as W,ao as j,ap as w,K as z,aw as C,F as T,ar as G,ax as K,T as L}from"./index-1cb64e4a.js";const ae=({tableElements:t,sortField:o,pageName:f,route:d,router:i})=>{const a=v(+d.query.currentPage||1),e=v(10),l=D(()=>Math.ceil(t.value.length/e.value)),s=v(!1),N=r=>{o.value===r?s.value=!s.value:s.value=!1,o.value=r},P=r=>{a.value=r},V=D(()=>{const r=t.value.length;let h=(a.value-1)*e.value;h>=r&&r&&(P(Math.ceil(r/e.value)),h=(a.value-1)*e.value);let B=h+e.value;const S=t.value.slice(h,B);return s.value?S.sort((x,b)=>x[o.value]>b[o.value]?-1:1):S.sort((x,b)=>x[o.value]>b[o.value]?1:-1)});return E(a,()=>{i.push({name:f,query:{...d.query,currentPage:a.value}})}),{currentPage:a,paginatedElements:V,totalPages:l,isInverseSort:s,elementsPerPageCount:e,setSortField:N}},le=()=>{const t=v(!1),o=v(!1),f=v(!1),d=v(null);return{isAddDialogActive:t,isEditDialogActive:f,isDeleteDialogActive:o,itemToEdit:d,openDialog:(a,e)=>{d.value=a,e==="edit"&&(f.value=!0),e==="delete"&&(o.value=!0)}}},O={class:"d-sm-table-row d-none"},U=["onClick"],H=n("th",{class:"text-h6 pa-0 pr-3 pb-3 font-weight-bold text-black text-left"},"Действия",-1),J={class:"d-sm-none d-table-row"},Q=["colspan"],R={class:"d-sm-none d-block font-weight-bold flex-grow-1 pr-1"},X={class:"text-sm-left text-right"},Y={class:"d-sm-table-cell d-flex justify-end h-auto pa-0 py-3"},Z={class:"d-flex flex-wrap"},ee={key:1,class:"text-center text-h6 text-error font-weight-bold mb-5"},oe=F({__name:"ElementsTable",props:{items:null,fields:null,currentSortField:null,isInverseSort:{type:Boolean},noDataText:null},emits:["updateSortField","openDialog"],setup(t,{emit:o}){const{xs:f}=$(),d=(i,a)=>{f.value||L.from(i,{duration:.6,opacity:0,y:"-50%",ease:"power1.out",onComplete:a})};return(i,a)=>t.items.length?(c(),q(K,{key:0},{default:p(()=>[n("tr",O,[(c(!0),m(w,null,y(t.fields,e=>(c(),m("th",{class:"text-h6 pa-0 pb-3 font-weight-bold text-black text-left",key:e.fieldName,onClick:l=>i.$emit("updateSortField",e.fieldName)},[u(j,null,{default:p(({isHovering:l,props:s})=>[n("p",k(s,{class:"pr-6 d-inline-block",style:{position:"relative"}}),[A(g(e.fieldText)+" ",1),_(u(M,{style:W([{position:"absolute",right:"0px",top:"50%",transform:"translate(0, -50%)"},{opacity:l&&t.currentSortField!=e.fieldName?.6:1}]),icon:t.isInverseSort&&t.currentSortField==e.fieldName?"mdi-arrow-up-thin":"mdi-arrow-down-thin"},null,8,["icon","style"]),[[I,t.currentSortField===e.fieldName||l]])],16)]),_:2},1024)],8,U))),128)),H]),n("tr",J,[n("td",{colspan:t.fields.length+1},[u(z,{items:t.fields,"item-title":"fieldText","item-value":"fieldName","model-value":t.currentSortField,"onUpdate:modelValue":a[0]||(a[0]=e=>o("updateSortField",e)),variant:"underlined",clearable:!1,label:"Сортировать по"},null,8,["items","model-value"])],8,Q)]),n("tbody",null,[u(G,{onEnter:d},{default:p(()=>[(c(!0),m(w,null,y(t.items,e=>(c(),m("tr",{key:e.id,class:"d-sm-table-row d-block"},[(c(!0),m(w,null,y(t.fields,l=>(c(),m("td",{key:l.fieldName,class:"d-sm-table-cell d-flex pa-0 h-auto py-3"},[n("div",R,g(l.fieldText)+": ",1),n("div",X,g(e[l.fieldName]),1)]))),128)),n("td",Y,[n("div",Z,[u(C,{text:"Удалить",location:"bottom","content-class":"tooltip",transition:"slide-x-transition"},{activator:p(({props:l})=>[u(T,k(l,{variant:"flat",icon:"mdi-trash-can",color:"error",class:"mr-2",onClick:s=>i.$emit("openDialog",e,"delete")}),null,16,["onClick"])]),_:2},1024),u(C,{text:"Редактировать",location:"bottom","content-class":"tooltip",transition:"slide-x-reverse-transition"},{activator:p(({props:l})=>[u(T,k(l,{variant:"flat",icon:"mdi-pencil",color:"info",onClick:s=>i.$emit("openDialog",e,"edit")}),null,16,["onClick"])]),_:2},1024)])])]))),128))]),_:1})])]),_:1})):(c(),m("div",ee,g(t.noDataText||"Ничего не найдено"),1))}});export{oe as _,ae as a,le as u};
