import{d as J,r as K,u as Q,s as W,w as X,o as Y,c as Z,a as e,b as t,e as o,f as ee,g as te,h as s,i as E,v as M,j as _,k as r,t as se,l as oe,m as U,p as ae,n as re,_ as ne}from"./index-6edf1a79.js";import{u as le,a as ce,b as I}from"./useFormSchemas-ddd00117.js";const ie=""+new URL("bg-ffc91902.png",import.meta.url).href,u=n=>(ae("data-v-db88321a"),n=n(),re(),n),de={class:"fullscreen h-100 d-flex justify-center align-center"},_e={class:"text-white text-h6"},ue=u(()=>r("div",{class:"text-white text-h6"}," Вы успешно авторизировались, вскоре вы будете переведены на сайт! ",-1)),me=u(()=>r("div",{class:"form-title text-center text-h4 py-4"},"Авторизация",-1)),pe=u(()=>r("span",{class:"text-white text-h6 font-weight-medium"},"Войти",-1)),ve={class:"mt-2"},fe=u(()=>r("span",{class:"text-decoration-underline text-green"}," Зарегистрироваться ",-1)),ge=J({__name:"LoginView",setup(n){const l=ee(),g=te(),{loginSchema:L}=le(),{handleSubmit:R,isSubmitting:h,resetForm:q}=ce({validationSchema:L}),{value:m,errorMessage:B}=I("email"),{value:p,errorMessage:C}=I("password"),c=K(!1),b=Q(),{isUserLoggedIn:T,authErrorMessage:x,isSuccessMessageShown:w,isErrorMessageShown:i}=W(b),{loginUser:z}=b,N=R(async S=>{await z(S,q),T.value&&setTimeout(()=>{l.query.redirectedFrom?g.push({name:l.query.redirectedFrom}):g.push("/")},2500)});return X(()=>{l.query.redirectedFrom&&(i.value=!0,x.value=`Для доступа к странице ${l.query.redirectedFrom} необходимо авторизироваться`,setTimeout(()=>i.value=!1,3500))}),(S,a)=>{const y=s("v-alert-title"),k=s("v-alert"),V=s("v-dialog-transition"),j=s("v-card-title"),v=s("v-icon"),F=s("v-text-field"),f=s("v-col"),A=s("v-btn"),D=s("router-link"),P=s("v-row"),$=s("v-form"),O=s("v-card-actions"),G=s("v-card"),H=s("v-img");return Y(),Z("div",de,[e(V,null,{default:t(()=>[E(e(k,{class:"alert",type:"error","max-width":400},{default:t(()=>[e(y,{class:"text-h4 mb-2"},{default:t(()=>[_(" Ошибка ")]),_:1}),r("div",_e,se(o(x)),1)]),_:1},512),[[M,o(i)]])]),_:1}),e(V,null,{default:t(()=>[E(e(k,{class:"alert",type:"success","max-width":400},{default:t(()=>[e(y,{class:"text-h4 mb-2"},{default:t(()=>[_(" Успех ")]),_:1}),ue]),_:1},512),[[M,o(w)]])]),_:1}),e(G,{class:"form-card flex-grow-1 pb-8 rounded-lg","max-width":486,elevation:0},{default:t(()=>[me,e(O,{class:"pt-4 pb-1 px-lg-10 px-md-8 px-4"},{default:t(()=>[e($,{onSubmit:oe(o(N),["prevent"]),class:"w-100"},{default:t(()=>[e(j,{class:"text-indigo-darken-2 text-center mb-2"},{default:t(()=>[_(" Введите ваши данные")]),_:1}),e(P,null,{default:t(()=>[e(f,{cols:"12"},{default:t(()=>[e(F,{modelValue:o(m),"onUpdate:modelValue":a[0]||(a[0]=d=>U(m)?m.value=d:null),"error-messages":o(B),"bg-color":"rgba(229, 229, 229, 0.25)",placeholder:"Ваша почта",hint:"Ваша почта при регистрации",clearable:""},{"prepend-inner":t(()=>[e(v,{icon:"mdi-email",class:"icon mr-lg-3 mr-1",size:"large"})]),_:1},8,["modelValue","error-messages","bg-color"])]),_:1}),e(f,{cols:"12"},{default:t(()=>[e(F,{modelValue:o(p),"onUpdate:modelValue":a[2]||(a[2]=d=>U(p)?p.value=d:null),"error-messages":o(C),"bg-color":"rgba(229, 229, 229, 0.25)",placeholder:"Ваш пароль",hint:"Ваш пароль при регистрации",type:c.value?"text":"password",clearable:""},{"prepend-inner":t(()=>[e(v,{icon:"mdi-lock",class:"icon mr-lg-3 mr-1",size:"large"})]),"append-inner":t(()=>[e(v,{onClick:a[1]||(a[1]=d=>c.value=!c.value),class:"text-dark-blue",icon:c.value?"mdi-eye":"mdi-eye-off",size:"large"},null,8,["icon"])]),_:1},8,["modelValue","error-messages","bg-color","type"])]),_:1}),e(f,null,{default:t(()=>[e(A,{type:"submit",loading:o(h),disabled:o(h)||o(i)||o(w),block:"",color:"dark-blue",variant:"flat"},{default:t(()=>[pe]),_:1},8,["loading","disabled"]),r("p",ve,[e(D,{to:{name:"register-page"},class:"text-black text-h6"},{default:t(()=>[_("Нет аккаунта? "),fe]),_:1})])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1}),e(H,{class:"bg-image",cover:"",src:o(ie),alt:"OfficePic"},null,8,["src"])])}}});const xe=ne(ge,[["__scopeId","data-v-db88321a"]]);export{xe as default};
