import{r as v,Q as D,X as F,d as $,aj as q,o as c,P as A,f as p,s,c as m,ar as y,e as u,ao as k,q as E,t as g,am as _,an as I,F as j,aw as G,ap as L,aq as w,L as M,ax as C,G as N,as as U,ay as z,U as Q}from"./index-01d92673.js";const ae=({tableElements:t,sortField:o,pageName:f,route:d,router:i})=>{const a=v(+d.query.currentPage||1),e=v(10),l=D(()=>Math.ceil(t.value.length/e.value)),n=v(!1),T=r=>{o.value===r?n.value=!n.value:n.value=!1,o.value=r},P=r=>{a.value=r},V=D(()=>{const r=t.value.length;let h=(a.value-1)*e.value;h>=r&&r&&(P(Math.ceil(r/e.value)),h=(a.value-1)*e.value);let B=h+e.value;const S=t.value.slice(h,B);return n.value?S.sort((x,b)=>x[o.value]>b[o.value]?-1:1):S.sort((x,b)=>x[o.value]>b[o.value]?1:-1)});return F(a,()=>{i.push({name:f,query:{...d.query,currentPage:a.value}})}),{currentPage:a,paginatedElements:V,totalPages:l,isInverseSort:n,elementsPerPageCount:e,setSortField:T}},le=()=>{const t=v(!1),o=v(!1),f=v(!1),d=v(null);return{isAddDialogActive:t,isEditDialogActive:f,isDeleteDialogActive:o,itemToEdit:d,openDialog:(a,e)=>{d.value=a,e==="edit"&&(f.value=!0),e==="delete"&&(o.value=!0)}}},W={class:"d-sm-table-row d-none"},X=["onClick"],H=s("th",{class:"text-h6 pa-0 pr-3 pb-3 font-weight-bold text-black text-left"},"Действия",-1),J={class:"d-sm-none d-table-row"},K=["colspan"],O={class:"d-sm-none d-block font-weight-bold flex-grow-1 pr-1"},R={class:"text-sm-left text-right"},Y={class:"d-sm-table-cell d-flex justify-end h-auto pa-0 py-3"},Z={class:"d-flex flex-wrap"},ee={key:1,class:"text-center text-h6 text-error font-weight-bold mb-5"},oe=$({__name:"ElementsTable",props:{items:null,fields:null,currentSortField:null,isInverseSort:{type:Boolean},noDataText:null},emits:["updateSortField","openDialog"],setup(t,{emit:o}){const{xs:f}=q(),d=(i,a)=>{f.value||Q.from(i,{duration:.6,opacity:0,y:"-50%",ease:"power1.out",onComplete:a})};return(i,a)=>t.items.length?(c(),A(z,{key:0},{default:p(()=>[s("tr",W,[(c(!0),m(w,null,y(t.fields,e=>(c(),m("th",{class:"text-h6 pa-0 pb-3 font-weight-bold text-black text-left",key:e.fieldName,onClick:l=>i.$emit("updateSortField",e.fieldName)},[u(L,null,{default:p(({isHovering:l,props:n})=>[s("p",k(n,{class:"pr-6 d-inline-block",style:{position:"relative"}}),[E(g(e.fieldText)+" ",1),_(u(j,{style:G([{position:"absolute",right:"0px",top:"50%",transform:"translate(0, -50%)"},{opacity:l&&t.currentSortField!=e.fieldName?.6:1}]),icon:t.isInverseSort&&t.currentSortField==e.fieldName?"mdi-arrow-up-thin":"mdi-arrow-down-thin"},null,8,["icon","style"]),[[I,t.currentSortField===e.fieldName||l]])],16)]),_:2},1024)],8,X))),128)),H]),s("tr",J,[s("td",{colspan:t.fields.length+1},[u(M,{items:t.fields,"item-title":"fieldText","item-value":"fieldName","model-value":t.currentSortField,"onUpdate:modelValue":a[0]||(a[0]=e=>o("updateSortField",e)),variant:"underlined",clearable:!1,label:"Сортировать по"},null,8,["items","model-value"])],8,K)]),s("tbody",null,[u(U,{onEnter:d},{default:p(()=>[(c(!0),m(w,null,y(t.items,e=>(c(),m("tr",{key:e.id,class:"d-sm-table-row d-block"},[(c(!0),m(w,null,y(t.fields,l=>(c(),m("td",{key:l.fieldName,class:"d-sm-table-cell d-flex pa-0 h-auto py-3"},[s("div",O,g(l.fieldText)+": ",1),s("div",R,g(e[l.fieldName]),1)]))),128)),s("td",Y,[s("div",Z,[u(C,{text:"Удалить",location:"bottom","content-class":"tooltip",transition:"slide-x-transition"},{activator:p(({props:l})=>[u(N,k(l,{variant:"flat",icon:"mdi-trash-can",color:"error",class:"mr-2",onClick:n=>i.$emit("openDialog",e,"delete")}),null,16,["onClick"])]),_:2},1024),u(C,{text:"Редактировать",location:"bottom","content-class":"tooltip",transition:"slide-x-reverse-transition"},{activator:p(({props:l})=>[u(N,k(l,{variant:"flat",icon:"mdi-pencil",color:"info",onClick:n=>i.$emit("openDialog",e,"edit")}),null,16,["onClick"])]),_:2},1024)])])]))),128))]),_:1})])]),_:1})):(c(),m("div",ee,g(t.noDataText||"Ничего не найдено"),1))}});export{oe as _,ae as a,le as u};
