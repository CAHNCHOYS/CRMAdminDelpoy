import{r as m,z as T,D as $,d as A,R as B,o as r,y as E,e as g,m as s,c as v,Y as D,b as c,W as C,l as F,t as _,U as V,V as q,a1 as I,X as N,Z as z,C as M,k as p}from"./index-895edbee.js";const O=({tableElements:t,sortField:a,pageName:f,route:u,router:i})=>{const o=m(+u.query.currentPage||1),n=m(10),y=T(()=>Math.ceil(t.value.length/n.value)),d=m(!1),b=e=>{a.value===e?d.value=!d.value:d.value=!1,a.value=e},x=e=>{o.value=e},k=T(()=>{const e=t.value.length;let l=(o.value-1)*n.value;l>=e&&e&&(x(Math.ceil(e/n.value)),l=(o.value-1)*n.value);let h=l+n.value;const P=t.value.slice(l,h);return d.value?P.sort((w,S)=>w[a.value]>S[a.value]?-1:1):P.sort((w,S)=>w[a.value]>S[a.value]?1:-1)});return $(o,()=>{i.push({name:f,query:{...u.query,currentPage:o.value}})}),{currentPage:o,paginatedElements:k,totalPages:y,isInverseSort:d,elementsPerPageCount:n,setSortField:b}},Q=()=>{const t=m(!1),a=m(!1),f=m(!1),u=m(null);return{isAddDialogActive:t,isEditDialogActive:f,isDeleteDialogActive:a,itemToEdit:u,openDialog:(o,n)=>{u.value=o,n==="edit"&&(f.value=!0),n==="delete"&&(a.value=!0)}}},U={class:"d-sm-table-row d-none"},W=["onClick"],j=s("th",{class:"text-h6 pa-0 pr-3 pb-3 font-weight-bold text-black text-left"},"Действия",-1),G={class:"d-sm-none d-table-row"},L=["colspan"],R={class:"d-sm-none d-block font-weight-bold flex-grow-1 pr-1"},X={class:"text-sm-left text-right"},Y={class:"d-sm-table-cell d-flex justify-end h-auto pa-0 py-3"},Z={class:"d-flex flex-wrap"},J={key:1,class:"text-center text-h6 text-error font-weight-bold mb-5"},H=A({__name:"ElementsTable",props:{items:null,fields:null,currentSortField:null,isInverseSort:{type:Boolean},noDataText:null},emits:["updateSortField","openDialog"],setup(t,{emit:a}){const{xs:f}=B(),u=(i,o)=>{f.value||M.from(i,{duration:.6,opacity:0,y:"-50%",ease:"power1.out",onComplete:o})};return(i,o)=>{const n=p("v-icon"),y=p("v-hover"),d=p("v-select"),b=p("v-btn"),x=p("v-tooltip"),k=p("v-table");return t.items.length?(r(),E(k,{key:0},{default:g(()=>[s("tr",U,[(r(!0),v(N,null,D(t.fields,e=>(r(),v("th",{class:"text-h6 pa-0 pb-3 font-weight-bold text-black text-left",key:e.fieldName,onClick:l=>i.$emit("updateSortField",e.fieldName)},[c(y,null,{default:g(({isHovering:l,props:h})=>[s("p",C(h,{class:"pr-6 d-inline-block",style:{position:"relative"}}),[F(_(e.fieldText)+" ",1),V(c(n,{style:I([{position:"absolute",right:"0px",top:"50%",transform:"translate(0, -50%)"},{opacity:l&&t.currentSortField!=e.fieldName?.6:1}]),icon:t.isInverseSort&&t.currentSortField==e.fieldName?"mdi-arrow-up-thin":"mdi-arrow-down-thin"},null,8,["icon","style"]),[[q,t.currentSortField===e.fieldName||l]])],16)]),_:2},1024)],8,W))),128)),j]),s("tr",G,[s("td",{colspan:t.fields.length+1},[c(d,{items:t.fields,"item-title":"fieldText","item-value":"fieldName","model-value":t.currentSortField,"onUpdate:modelValue":o[0]||(o[0]=e=>a("updateSortField",e)),variant:"underlined",clearable:!1,label:"Сортировать по"},null,8,["items","model-value"])],8,L)]),s("tbody",null,[c(z,{onEnter:u},{default:g(()=>[(r(!0),v(N,null,D(t.items,e=>(r(),v("tr",{key:e.id,class:"d-sm-table-row d-block"},[(r(!0),v(N,null,D(t.fields,l=>(r(),v("td",{key:l.fieldName,class:"d-sm-table-cell d-flex pa-0 h-auto py-3"},[s("div",R,_(l.fieldText)+": ",1),s("div",X,_(e[l.fieldName]),1)]))),128)),s("td",Y,[s("div",Z,[c(x,{text:"Удалить",location:"bottom","content-class":"tooltip",transition:"slide-x-transition"},{activator:g(({props:l})=>[c(b,C(l,{variant:"flat",icon:"mdi-trash-can",color:"error",class:"mr-2",onClick:h=>i.$emit("openDialog",e,"delete")}),null,16,["onClick"])]),_:2},1024),c(x,{text:"Редактировать",location:"bottom","content-class":"tooltip",transition:"slide-x-reverse-transition"},{activator:g(({props:l})=>[c(b,C(l,{variant:"flat",icon:"mdi-pencil",color:"info",onClick:h=>i.$emit("openDialog",e,"edit")}),null,16,["onClick"])]),_:2},1024)])])]))),128))]),_:1})])]),_:1})):(r(),v("div",J,_(t.noDataText||"Ничего не найдено"),1))}}});export{H as _,O as a,Q as u};
