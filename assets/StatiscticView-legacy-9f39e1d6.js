System.register(["./index-legacy-f3dd0dbc.js","./index-legacy-2918cdf4.js"],(function(t,e){"use strict";var a,s,o,l,r,n,d,i,c,u,p,m,g,h,f,b,x,y,v,_,w,A,D,k,C,B,F,P,j,I,O=document.createElement("style");return O.textContent="canvas[data-v-9551457b]{width:100%!important;min-height:200px!important;max-height:400px}@media (max-width: 479.98px){canvas[data-v-9551457b]{max-height:250px}}canvas[data-v-04e52979]{width:100%!important;min-height:200px!important;max-height:400px!important}@media (max-width: 479.98px){canvas[data-v-04e52979]{max-height:250px!important}}canvas[data-v-377b486c]{width:100%!important;min-height:250px!important}canvas[data-v-07495283]{width:100%!important;min-height:250px!important}canvas[data-v-e2cbfbac]{width:100%!important;min-height:250px!important;max-height:350px!important}canvas[data-v-bd750fb1]{width:100%!important;min-height:200px!important;max-height:350px!important}\n",document.head.appendChild(O),{setters:[t=>{a=t.d,s=t.r,o=t.F,l=t.B,r=t.G,n=t.D,d=t.H,i=t.I,c=t.J,u=t.K,p=t.L,m=t.M,g=t.N,h=t.O,f=t.Q,b=t.o,x=t.y,y=t.e,v=t.f,_=t.c,w=t.k,A=t._,D=t.R,k=t.E,C=t.S,B=t.T,F=t.C,P=t.b,j=t.m,I=t.t},null],execute:function(){const e={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},O={type:{type:String,required:!0},...e},E="2"===h[0]?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function R(t){return c(t)?d(t):t}function S(t,e){t.labels=e}function z(t,e,a){const s=[];t.datasets=e.map((e=>{const o=t.datasets.find((t=>t[a]===e[a]));return o&&e.data&&!s.includes(o)?(s.push(o),Object.assign(o,e),o):{...e}}))}const M=a({props:O,setup(t,e){let{expose:a}=e;const p=s(null),m=o(null);return a({chart:m}),l((()=>{if(!p.value)return;const{type:e,data:a,options:s,plugins:o,datasetIdKey:l}=t,r=function(t,e){const a={labels:[],datasets:[]};return S(a,t.labels),z(a,t.datasets,e),a}(a,l),n=function(t){return c(arguments.length>1&&void 0!==arguments[1]?arguments[1]:t)?new Proxy(t,{}):t}(r,a);m.value=new u(p.value,{type:e,data:n,options:{...s},plugins:o})})),r((()=>{const t=d(m.value);t&&(t.destroy(),m.value=null)})),n([()=>t.options,()=>t.data],((e,a)=>{let[s,o]=e,[l,r]=a;const n=d(m.value);if(!n)return;let i=!1;if(s){const t=R(s),e=R(l);t&&t!==e&&(function(t,e){const a=t.options;a&&e&&Object.assign(a,e)}(n,t),i=!0)}if(o){const e=R(o.labels),a=R(r.labels),s=R(o.datasets),l=R(r.datasets);e!==a&&(S(n.config.data,e),i=!0),s&&s!==l&&(z(n.config.data,s,t.datasetIdKey),i=!0)}i&&(e=>{e.update(t.updateMode)})(n)}),{deep:!0}),()=>i("canvas",{ref:p})}});function K(t,s){return u.register(s),a({props:e,setup(e,a){let{expose:s}=a;const l=o(null),r=t=>{l.value=t?.chart};return s({chart:l}),()=>i(M,E({ref:r},{type:t,...e}))}})}const W=K("bar",p),Z=K("doughnut",m),q=K("line",g),T={key:1,class:"text-h6"},G=A(a({__name:"ProductsCount",props:{products:null},setup(t){const e=t,a=f((()=>({labels:e.products.map((t=>t.name)),datasets:[{label:"Кол-во: ",backgroundColor:["#512DA8","#283593","#0277BD","#558B2F","#78909C","#BDBDBD","#FF9800","#FBC02D","#42A5F5","#8BC34A","#5D4037","#64FFDA","#EC407A","#004D40","#AFB42B","#AD1457","#9E9E9E"],data:e.products.map((t=>t.count)),hoverOffset:4}]}))),s={responsive:!0,maintainAspectRatio:!1,layout:{padding:0},plugins:{legend:{display:!1},title:{display:!0,color:"black",text:"Количество каждого товара",padding:{bottom:20},font:{size:26,weight:"normal"}}}};return(t,o)=>{const l=w("v-card");return b(),x(l,{"max-width":"100%",elevation:"5",class:"pa-5"},{default:y((()=>[e.products.length?(b(),x(v(Z),{key:0,data:v(a),options:s},null,8,["data"])):(b(),_("p",T,"Недостаточно данных для построения графика"))])),_:1})}}}),[["__scopeId","data-v-9551457b"]]),H={key:1,class:"text-h6"},J=A(a({__name:"ProductsPrices",props:{products:null},setup(t){const e=t,a=f((()=>({labels:e.products.map((t=>t.name)),datasets:[{label:"Цена(руб): ",backgroundColor:["#512DA8","#283593","#0277BD","#558B2F","#78909C","#BDBDBD","#FF9800","#FBC02D","#42A5F5","#8BC34A","#5D4037","#64FFDA","#EC407A","#004D40","#AFB42B","#AD1457","#9E9E9E"],data:e.products.map((t=>t.price)),hoverOffset:4}]}))),s={responsive:!0,maintainAspectRatio:!1,layout:{padding:0},plugins:{legend:{display:!1},title:{display:!0,color:"black",text:"Цены товаров",padding:{bottom:20},font:{size:26,weight:"normal"}},tooltip:{}}};return(t,o)=>{const l=w("v-card");return b(),x(l,{"max-width":"100%",elevation:"5",class:"pa-5"},{default:y((()=>[e.products.length?(b(),x(v(Z),{key:0,data:v(a),options:s},null,8,["data"])):(b(),_("p",H,"Недостаточно данных для построения графика"))])),_:1})}}}),[["__scopeId","data-v-04e52979"]]),L={key:1,class:"text-h6"},N=A(a({__name:"CustomersPremium",props:{customers:null},setup(t){const e=t,a=f((()=>({labels:["Наличие премиума"],datasets:[{label:"Есть премиум",data:[e.customers.filter((t=>"Да"===t.premium)).length]},{label:"Нету премиума",data:[e.customers.filter((t=>"Нет"===t.premium)).length]}]}))),s={responsive:!0,maintainAspectRatio:!1,layout:{padding:0},elements:{bar:{borderRadius:0,borderWidth:4}},scales:{y:{beginAtZero:!0,suggestedMin:0}},plugins:{legend:{display:!0,position:"bottom",title:{}},title:{display:!0,color:"black",text:"Премиум у клиентов",padding:{bottom:20},font:{size:26,weight:"normal"}}}};return(t,o)=>{const l=w("v-card");return b(),x(l,{"max-width":"100%",class:"pa-5",elevation:"5"},{default:y((()=>[e.customers.length?(b(),x(v(W),{key:0,data:v(a),options:s},null,8,["data"])):(b(),_("p",L,"Недостаточно данных для построения графика"))])),_:1})}}}),[["__scopeId","data-v-377b486c"]]),Q={key:1,class:"text-h6"},V=A(a({__name:"CategoryProductsCount",props:{categories:null,products:null},setup(t){const e=t,a=f((()=>({labels:["Количество товара по категориям"],datasets:e.categories.map((t=>({label:t.name,data:[e.products.filter((e=>e.category===t.name)).length]})))}))),s={responsive:!0,maintainAspectRatio:!1,layout:{padding:0},elements:{bar:{borderRadius:0,borderWidth:4}},scales:{x:{grid:{display:!1}},y:{grid:{display:!1}}},plugins:{legend:{display:!0,position:"bottom"},title:{display:!0,color:"black",text:"Количество товаров по категориям",padding:{bottom:20},font:{size:26,weight:"normal"}}}};return(t,o)=>{const l=w("v-card");return b(),x(l,{"max-width":"100%",class:"pa-5",elevation:"5"},{default:y((()=>[e.products.length?(b(),x(v(W),{key:0,data:v(a),options:s},null,8,["data"])):(b(),_("p",Q,"Недостаточно данных для построения графика"))])),_:1})}}}),[["__scopeId","data-v-07495283"]]),U={key:1,class:"text-h6"},X=A(a({__name:"OrdersByDate",props:{orders:null},setup(t){const e=t;function a(t){return t.split("-").reverse().join("-")}const s=f((()=>{const t=[],a=[];for(const s of e.orders)if(!t.includes(s.date)){const o=e.orders.filter((t=>t.date===s.date));t.push(s.date),a.push(o.reduce(((t,e)=>t+e.productCount),0))}return a})),o=f((()=>({labels:[...new Set(e.orders.sort(((t,e)=>Date.parse(a(t.date))-Date.parse(a(e.date)))).map((t=>t.date)))],datasets:[{label:"Кол-во товаров",data:s.value,borderColor:"#3F51B5",fill:!1,borderWidth:4}]}))),l={responsive:!0,maintainAspectRatio:!1,layout:{padding:0},scales:{y:{beginAtZero:!1,suggestedMin:0,grid:{display:!1}},x:{grid:{display:!1}}},plugins:{legend:{display:!1},title:{display:!0,color:"black",text:"Кол-во товаров в заказах",padding:{bottom:20},font:{size:26,weight:"normal"}}}};return(t,a)=>{const s=w("v-card");return b(),x(s,{width:"100%",color:"white",class:"pa-5",elevation:"5"},{default:y((()=>[e.orders.length?(b(),x(v(q),{key:0,data:v(o),options:l},null,8,["data"])):(b(),_("p",U,"Недостаточно данных для построения графика"))])),_:1})}}}),[["__scopeId","data-v-e2cbfbac"]]),Y={key:1,class:"text-h6"},$=A(a({__name:"ProductsInOrders",props:{products:null,orders:null},setup(t){const e=t,a=f((()=>({labels:["Товары"],datasets:e.products.map((t=>({label:t.name,data:[e.orders.filter((e=>e.productId===t.id)).length]})))}))),s={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,grid:{display:!1}},x:{grid:{display:!1}}},layout:{padding:0},elements:{bar:{borderWidth:4,borderRadius:0}},plugins:{title:{display:!0,text:"Сколько раз был заказан какой товар",padding:{bottom:20},font:{size:20,weight:"bold"}},legend:{display:!1}}};return(t,o)=>{const l=w("v-card");return b(),x(l,{color:"white",class:"pa-5",elevation:"5"},{default:y((()=>[e.orders.length?(b(),x(v(W),{key:0,data:v(a),options:s},null,8,["data"])):(b(),_("p",Y,"Недостаточно данных для построения графика"))])),_:1})}}}),[["__scopeId","data-v-bd750fb1"]]),tt=j("h2",{class:"title text-sm-h2 text-h3 mb-6"},"Статистика",-1),et=j("p",{class:"text-sm-h5 text-h6"},"Всего товаров",-1),at={class:"text-h2"},st=j("p",{class:"text-sm-h5 text-h6"},"Всего Клиентов",-1),ot={class:"text-h2"},lt=j("p",{class:"text-sm-h5 text-h6"},"Всего Заказов",-1),rt={class:"text-h2"};t("default",a({__name:"StatiscticView",setup(t){const{smAndDown:e}=D(),a=k(),o=C(),r=B(),n=s({count:0}),d=s({count:0}),i=s({count:0});return l((async()=>{a.productsCategories.length||await a.getAllProductsCategories(),F.from(".title",{x:"-300",opacity:0,ease:"linear",duration:.5}),F.from(".stats-header > *",{x:"-100%",stagger:.25,duration:.25,opacity:0,ease:"power2.out"}),F.from(".charts-row > *",{scale:0,stagger:.35,duration:.35,opacity:0,ease:"power3.out",delay:.85,scrollTrigger:{trigger:".charts-row",start:"top 80%",end:"+=1000"}}),F.to(n.value,{count:a.userProducts.length,duration:2,delay:.25}),F.to(d.value,{count:o.customers.length,duration:2,delay:.5}),F.to(i.value,{count:r.orders.length,duration:2,delay:.75})})),(t,s)=>{const l=w("v-btn"),c=w("v-col"),u=w("v-row"),p=w("v-card-text"),m=w("v-card");return b(),_("div",null,[tt,P(u,{class:"stats-header"},{default:y((()=>[P(c,{sm:"4",cols:"12",class:"left-header-col"},{default:y((()=>[P(m,{color:"green",height:"100%",elevation:"0"},{default:y((()=>[P(p,null,{default:y((()=>[P(u,{align:"center","no-gutters":v(e)},{default:y((()=>[P(c,{md:"auto",cols:"12",class:"d-md-block d-flex justify-center mb-md-0 mb-1"},{default:y((()=>[P(l,{icon:"mdi-laptop",color:"blue-grey",class:"text-white"})])),_:1}),P(c,{cols:"auto",class:"flex-grow-1 text-md-left text-center"},{default:y((()=>[et,j("p",at,I(n.value.count.toFixed(0)),1)])),_:1})])),_:1},8,["no-gutters"])])),_:1})])),_:1})])),_:1}),P(c,{sm:"4",cols:"6",class:"right-header-col"},{default:y((()=>[P(m,{color:"deep-orange-lighten-2",height:"100%",elevation:"0"},{default:y((()=>[P(p,null,{default:y((()=>[P(u,{align:"center","no-gutters":v(e)},{default:y((()=>[P(c,{md:"auto",cols:"12",class:"d-md-block d-flex justify-center mb-md-0 mb-1"},{default:y((()=>[P(l,{icon:"mdi-account",color:"cyan",class:"text-white"})])),_:1}),P(c,{cols:"auto",class:"flex-grow-1 text-white text-md-left text-center"},{default:y((()=>[st,j("p",ot,I(d.value.count.toFixed(0)),1)])),_:1})])),_:1},8,["no-gutters"])])),_:1})])),_:1})])),_:1}),P(c,{sm:"4",cols:"6",class:"right-header-col"},{default:y((()=>[P(m,{color:"light-blue",height:"100%",elevation:"0"},{default:y((()=>[P(p,null,{default:y((()=>[P(u,{align:"center","no-gutters":v(e)},{default:y((()=>[P(c,{md:"auto",cols:"12",class:"d-md-block d-flex justify-center mb-md-0 mb-1"},{default:y((()=>[P(l,{icon:"mdi-wallet",color:"pink",class:"text-white"})])),_:1}),P(c,{cols:"auto",class:"flex-grow-1 text-white text-md-left text-center"},{default:y((()=>[lt,j("p",rt,I(i.value.count.toFixed(0)),1)])),_:1})])),_:1},8,["no-gutters"])])),_:1})])),_:1})])),_:1})])),_:1}),P(u,{align:"stretch",class:"charts-row"},{default:y((()=>[P(c,{md:"4",sm:"6",cols:"12"},{default:y((()=>[P(G,{products:v(a).userProducts},null,8,["products"])])),_:1}),P(c,{md:"4",sm:"6",cols:"12"},{default:y((()=>[P(J,{products:v(a).userProducts},null,8,["products"])])),_:1}),P(c,{md:"4",sm:"6",cols:"12"},{default:y((()=>[P(N,{customers:v(o).customers},null,8,["customers"])])),_:1}),P(c,{md:"4",sm:"6",cols:"12"},{default:y((()=>[P(V,{products:v(a).userProducts,categories:v(a).productsCategories},null,8,["products","categories"])])),_:1}),P(c,{md:"8",cols:"12"},{default:y((()=>[P(X,{orders:v(r).orders},null,8,["orders"])])),_:1}),P(c,{cols:"12"},{default:y((()=>[P($,{products:v(a).userProducts,orders:v(r).orders},null,8,["products","orders"])])),_:1})])),_:1})])}}}))}}}));
