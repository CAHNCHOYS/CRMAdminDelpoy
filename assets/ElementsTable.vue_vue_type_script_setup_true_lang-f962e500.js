import{r as p,z as P,D as A,d as B,o as c,y as E,e as h,m as u,c as v,X as C,b as m,V as D,l as V,t as x,T as q,U as F,a0 as I,W as S,Y as L,C as T,k as g}from"./index-6bc77bae.js";const K=({tableElements:t,sortField:l,pageName:f,route:d,router:s})=>{const o=p(+d.query.currentPage||1),a=p(10),y=P(()=>Math.ceil(t.value.length/a.value)),i=p(!1),b=e=>{l.value===e?i.value=!i.value:i.value=!1,l.value=e},_=e=>{o.value=e},n=P(()=>{const e=t.value.length;let r=(o.value-1)*a.value;r>=e&&e&&(_(Math.ceil(e/a.value)),r=(o.value-1)*a.value);let $=r+a.value;const N=t.value.slice(r,$);return i.value?N.sort((k,w)=>k[l.value]>w[l.value]?-1:1):N.sort((k,w)=>k[l.value]>w[l.value]?1:-1)});return A(o,()=>{s.push({name:f,query:{...d.query,currentPage:o.value}})}),{currentPage:o,paginatedElements:n,totalPages:y,isInverseSort:i,elemetsPerPage:a,setSortField:b}},O=()=>{const t=p(!1),l=p(!1),f=p(!1),d=p(null);return{isAddDialogActive:t,isEditDialogActive:f,isDeleteDialogActive:l,itemToEdit:d,openDialog:(o,a)=>{console.log(o),d.value=o,a==="edit"&&(f.value=!0),a==="delete"&&(l.value=!0)}}},j={class:"d-none d-sm-table-row"},z=["onClick"],M=u("th",{class:"text-h6 pa-0 pr-3 pb-3 font-weight-bold text-black text-left"},"Действия",-1),W={class:"d-sm-none d-block font-weight-bold pr-1"},G={class:"text-sm-left text-right"},U={class:"d-sm-table-cell d-flex justify-end h-auto pa-0 py-3"},X={class:"d-flex flex-wrap"},Y={key:1,class:"text-center text-h6 text-error font-weight-bold mb-5"},Q=B({__name:"ElementsTable",props:{items:null,fields:null,currentSortField:null,isInverseSort:{type:Boolean},noDataText:null},emits:["update:currentSortField","openDialog"],setup(t,{emit:l}){const f=(s,o)=>{T.from(s,{duration:.6,opacity:0,y:"-50%",ease:"power1.out",onComplete:o})},d=(s,o)=>{T.to(s,{y:"100%",opacity:0,ease:"expo.out",position:"absolute",visibility:"hidden",duration:.5,onComplete:o})};return(s,o)=>{const a=g("v-icon"),y=g("v-hover"),i=g("v-btn"),b=g("v-tooltip"),_=g("v-table");return t.items.length?(c(),E(_,{key:0},{default:h(()=>[u("tr",j,[(c(!0),v(S,null,C(t.fields,n=>(c(),v("th",{class:"text-h6 pa-0 pb-3 font-weight-bold text-black text-left",key:n.fieldName,onClick:e=>s.$emit("update:currentSortField",n.fieldName)},[m(y,null,{default:h(({isHovering:e,props:r})=>[u("p",D(r,{class:"pr-6 d-inline-block",style:{position:"relative"}}),[V(x(n.fieldText)+" ",1),q(m(a,{style:I([{position:"absolute",right:"0px",top:"50%",transform:"translate(0, -50%)"},{opacity:e&&t.currentSortField!=n.fieldName?.6:1}]),icon:t.isInverseSort&&t.currentSortField==n.fieldName?"mdi-arrow-up-thin":"mdi-arrow-down-thin"},null,8,["icon","style"]),[[F,t.currentSortField===n.fieldName||e]])],16)]),_:2},1024)],8,z))),128)),M]),u("tbody",null,[m(L,{onEnter:f,onLeave:d},{default:h(()=>[(c(!0),v(S,null,C(t.items,n=>(c(),v("tr",{key:n.id,class:"d-sm-table-row d-block"},[(c(!0),v(S,null,C(t.fields,e=>(c(),v("td",{key:e.fieldName,class:"d-sm-table-cell d-flex justify-space-between pa-0 h-auto py-3"},[u("div",W,x(e.fieldText)+":",1),u("div",G,x(n[e.fieldName]),1)]))),128)),u("td",U,[u("div",X,[m(b,{text:"Удалить",location:"bottom","content-class":"tooltip",transition:"slide-x-transition"},{activator:h(({props:e})=>[m(i,D(e,{variant:"flat",icon:"mdi-trash-can",color:"error",class:"mr-2",onClick:r=>s.$emit("openDialog",n,"delete")}),null,16,["onClick"])]),_:2},1024),m(b,{text:"Редактировать",location:"bottom","content-class":"tooltip",transition:"slide-x-reverse-transition"},{activator:h(({props:e})=>[m(i,D(e,{variant:"flat",icon:"mdi-pencil",color:"info",onClick:r=>s.$emit("openDialog",n,"edit")}),null,16,["onClick"])]),_:2},1024)])])]))),128))]),_:1})])]),_:1})):(c(),v("div",Y,x(t.noDataText),1))}}});export{Q as _,K as a,O as u};
