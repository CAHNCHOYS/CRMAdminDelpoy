System.register(["./index-legacy-f3dd0dbc.js","./alert-legacy-6dc9dd53.js"],(function(e,t){"use strict";var a,l,o,r,n,s,i,d,u,c,v,g,m,p,f,h,y,w,x,_,b,N,k,V,T,C,D,U,M,A=document.createElement("style");return A.textContent=".note[data-v-44834e74]{cursor:move}.dragging{opacity:.5!important}.white-input .v-messages__message{color:#fff!important}\n",document.head.appendChild(A),{setters:[e=>{a=e.d,l=e.r,o=e.o,r=e.c,n=e.m,s=e.U,i=e.V,d=e.t,u=e.b,c=e.e,v=e.W,g=e.k,m=e._,p=e.a,f=e.u,h=e.z,y=e.B,w=e.i,x=e.h,_=e.f,b=e.y,N=e.x,k=e.X,V=e.Y,T=e.n,C=e.l,D=e.Z,U=e.C},e=>{M=e.u}],execute:function(){const t={class:"d-flex align-center"},A={class:"flex-grow-1"},F=m(a({__name:"Note",props:{note:null},emits:["deleteNote","dragstart","dragend","updateNote"],setup(e,{emit:a}){const m=e,p=l(!1),f=()=>{a("updateNote",m.note),p.value=!1};return(a,l)=>{const m=g("v-text-field"),h=g("v-icon"),y=g("v-hover");return o(),r("div",{class:"note py-3 px-4 bg-white mb-3",onDragstart:l[3]||(l[3]=t=>a.$emit("dragstart",t,e.note.id)),onDragend:l[4]||(l[4]=e=>a.$emit("dragend",e))},[n("div",t,[s(n("div",{class:"text-h6 flex-grow-1 pr-1"},d(e.note.title),513),[[i,!p.value]]),s(n("div",A,[u(m,{modelValue:e.note.title,"onUpdate:modelValue":l[0]||(l[0]=t=>e.note.title=t),density:"comfortable",variant:"underlined",clearable:!1,"bg-color":"white"},null,8,["modelValue"])],512),[[i,p.value]]),n("div",null,[u(y,null,{default:c((({props:t,isHovering:o})=>[u(h,v({icon:"mdi-trash-can",size:"large",color:o?"red-darken-3":"grey",onClick:l[1]||(l[1]=t=>a.$emit("deleteNote",e.note.id))},t),null,16,["color"])])),_:1}),u(y,null,{default:c((({props:e,isHovering:t})=>[s(u(h,v({onClick:l[2]||(l[2]=e=>p.value=!p.value),icon:"mdi-pencil",size:"large",color:t?"blue":"grey"},e),null,16,["color"]),[[i,!p.value]])])),_:1}),u(y,null,{default:c((({props:e,isHovering:t})=>[s(u(h,v({onClick:f,style:{cursor:"pointer"},icon:"mdi-content-save-all",size:"large",color:t?"green":"grey"},e),null,16,["color"]),[[i,p.value]])])),_:1})])])],32)}}}),[["__scopeId","data-v-44834e74"]]),S=new class{async getNotes(e){return p.get(`/Notes/${e}`)}async updateNote(e){return await p.patch("/Notes",e)}async deleteNote(e){return await p.delete(`/Notes/${e}`)}async addNote(e){return await p.post("/Notes",e)}},$={class:"text-h6"},z=n("div",{class:"text-h2 mb-8 title"},"Ваши заметки",-1),H={key:0,class:""},I=n("p",{class:"mb-3 text-h6"},"Загрузка заметок ...",-1),L={key:0,color:"transparent","max-height":700,style:{overflow:"auto","max-height":"700px"}},j=["onClick"],E=n("p",{class:"mb-2"},"Загрузка...",-1);e("default",a({__name:"NotesView",setup(e){const t=l([{title:"В процессе",isFormActive:!1,addText:""},{title:"Сделать потом",isFormActive:!1,addText:""},{title:"Сделано",isFormActive:!1,addText:""}]),a=(e,t)=>{e.target.classList.add("dragging"),e.dataTransfer.setData("id",t.toString())},v=e=>{e.target.classList.remove("dragging")},m=M(),p=f(),A=l([]),B=l(!1),W=l(!1),X=l(null),Y=h((()=>function(e){return A.value.filter((t=>t.type===e))}));y((async()=>{W.value=!0;try{const{data:e}=await S.getNotes(p.currentUser.id);A.value=e.notes}catch(e){w(e)?X.value=x(e):X.value="Ошибка при загрузке заметок!"}W.value=!1}));const Z=async e=>{B.value=!0;try{await S.updateNote(e)}catch(t){w(t)?m.showMessage("error",x(t)):m.showMessage("error","Ошибка при добавлении заметки!")}B.value=!1},q=async e=>{B.value=!0;try{await S.deleteNote(e),A.value=A.value.filter((t=>t.id!=e))}catch(t){w(t)?m.showMessage("error",x(t)):m.showMessage("error","Ошибка при добавлении заметки!")}B.value=!1},G=(e,t)=>{U.from(e,{opacity:0,scale:0,ease:"sine.out",duration:.6,onComplete:t})},J=(e,t)=>{U.to(e,{duration:.6,ease:"sine.out",opacity:0,scale:0,onComplete:t})};return(e,l)=>{const f=g("v-snackbar"),h=g("v-progress-linear"),y=g("v-card-title"),U=g("v-alert-title"),M=g("v-alert"),K=g("v-icon"),O=g("v-text-field"),P=g("v-btn"),Q=g("v-form"),R=g("v-expand-transition"),ee=g("v-card-actions"),te=g("v-card"),ae=g("v-col"),le=g("v-row"),oe=g("v-card-text"),re=g("v-dialog");return o(),r("div",null,[u(f,{modelValue:_(m).isMessageShown,"onUpdate:modelValue":l[0]||(l[0]=e=>_(m).isMessageShown=e),color:_(m).messageType},{default:c((()=>[n("p",$,d(_(m).messageText),1)])),_:1},8,["modelValue","color"]),z,W.value?(o(),r("div",H,[I,u(h,{color:"green",height:"4",indeterminate:""})])):(o(),b(le,{key:1,class:"row"},{default:c((()=>[(o(!0),r(k,null,V(t.value,(e=>(o(),b(ae,{key:e.title,onDragover:l[1]||(l[1]=T((()=>{}),["prevent"])),onDrop:t=>(async(e,t)=>{const a=e.dataTransfer?.getData("id");if(a){const e=A.value.find((e=>e.id===+a));e.type=t,await Z(e)}})(t,e.title)},{default:c((()=>[u(te,{color:"blue-grey-darken-1 pa-4"},{default:c((()=>[u(y,{class:"text-h4 text-white mb-5 pa-0"},{default:c((()=>[C(d(e.title),1)])),_:2},1024),_(Y)(e.title).length?(o(),r("div",L,[u(D,{onEnter:G,onLeave:J,css:!1,appear:""},{default:c((()=>[(o(!0),r(k,null,V(_(Y)(e.title),(e=>(o(),b(F,{key:e.id,note:e,onDeleteNote:q,onUpdateNote:Z,draggable:"true",onDragstart:a,onDragend:v},null,8,["note"])))),128))])),_:2},1024)])):(o(),b(M,{key:1,color:"white",class:"mb-2","border-color":"white"},{default:c((()=>[u(U,null,{default:c((()=>[C("Пока нет заметок, добавьте хоть одну !")])),_:1})])),_:1})),u(ee,{class:"d-flex flex-column pa-0 align-stretch",style:{"min-height":"auto"}},{default:c((()=>[n("div",{onClick:t=>e.isFormActive=!e.isFormActive,style:{cursor:"pointer"}},[u(K,{icon:e.isFormActive?"mdi-minus":"mdi-plus"},null,8,["icon"]),C(" Добавить заметку ")],8,j),u(R,null,{default:c((()=>[s(u(Q,{onSubmit:T((t=>{(async(e,t)=>{if(!(e.length<1)){B.value=!0;try{const{data:a}=await S.addNote({title:e,type:t,userId:p.currentUser.id});A.value.push({id:a.noteId,title:e,type:t})}catch(a){w(a)?m.showMessage("error",x(a)):m.showMessage("error","Ошибка при добавлении заметки!")}B.value=!1}})(e.addText,e.title),e.addText=""}),["prevent"])},{default:c((()=>[u(O,{"bg-color":"white",color:"black",placeholder:"Задача...",modelValue:e.addText,"onUpdate:modelValue":t=>e.addText=t,class:"my-2 white-input",rules:[e=>!!e||"Поле обязательное для ввода"]},null,8,["modelValue","onUpdate:modelValue","rules"]),u(P,{type:"submit",variant:"flat",color:"green"},{default:c((()=>[C("Добавить")])),_:1})])),_:2},1032,["onSubmit"]),[[i,e.isFormActive]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onDrop"])))),128))])),_:1})),!W.value&&X.value?(o(),b(M,{key:2,type:"error",border:"end",variant:"tonal"},{default:c((()=>[u(U,{class:"mb-2"},{default:c((()=>[C(" Ошибка при загрузке товаров ")])),_:1}),n("p",null,d(X.value),1)])),_:1})):N("",!0),u(re,{modelValue:B.value,"onUpdate:modelValue":l[2]||(l[2]=e=>B.value=e),scrim:!1,persistent:"",width:"auto"},{default:c((()=>[u(te,{color:"indigo-darken-4"},{default:c((()=>[u(oe,null,{default:c((()=>[E,u(h,{indeterminate:"",color:"white",class:"mb-0"})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}}))}}}));
